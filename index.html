<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BekOS v5</title>
<style>
html,body{
margin:0;
padding:0;
background:black;
color:#00ff00;
font-family:monospace;
height:100%;
overflow:hidden;
}
#screen{
position:absolute;
top:20px;
left:20px;
z-index:2;
max-width:95%;
}
input{
background:black;
color:#00ff00;
border:1px solid #00ff00;
padding:5px;
}
button{
background:black;
color:#00ff00;
border:1px solid #00ff00;
padding:5px 10px;
margin:5px;
}
canvas{
position:fixed;
top:0;
left:0;
}
video{
width:280px;
border:1px solid #00ff00;
margin-top:10px;
}
</style>
</head>
<body>

<canvas id="matrix"></canvas>
<div id="screen"></div>

<script>
// ===== MATRIX =====
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");
function resize(){
 canvas.width=window.innerWidth;
 canvas.height=window.innerHeight;
}
resize();
window.onresize=resize;

const letters="01";
const fontSize=14;
let columns=Math.floor(canvas.width/fontSize);
let drops=[];
for(let i=0;i<columns;i++) drops[i]=1;

function draw(){
 ctx.fillStyle="rgba(0,0,0,0.05)";
 ctx.fillRect(0,0,canvas.width,canvas.height);
 ctx.fillStyle="#0f0";
 ctx.font=fontSize+"px monospace";
 for(let i=0;i<drops.length;i++){
   const text=letters[Math.floor(Math.random()*2)];
   ctx.fillText(text,i*fontSize,drops[i]*fontSize);
   if(drops[i]*fontSize>canvas.height) drops[i]=0;
   drops[i]++;
 }
}
setInterval(draw,30);

// ===== SYSTEM =====
const screen=document.getElementById("screen");
let videoStream=null;
let audioStream=null;

function passwordScreen(){
 screen.innerHTML="Enter Root Password:<br><input type='password' id='pass'><br>";
 document.getElementById("pass").focus();
 document.getElementById("pass").addEventListener("keydown",function(e){
  if(e.key==="Enter"){
    if(this.value==="bek002"){
      loadSystem();
    }else{
      screen.innerHTML+="<br>ACCESS DENIED ‚ùå";
    }
  }
 });
}

function loadSystem(){
 screen.innerHTML=
 "BekOS v5.0<br><br>"+
 "<button onclick='startCamera()'>Start Camera</button>"+
 "<button onclick='stopCamera()'>Stop Camera</button>"+
 "<button onclick='snapshot()'>Snapshot</button><br>"+
 "<button onclick='startMic()'>Mic On</button>"+
 "<button onclick='systemInfo()'>System Info</button>"+
 "<button onclick='wifiScan()'>WiFi Scan</button>"+
 "<button onclick='terminal()'>Terminal</button>"+
 "<button onclick='shutdown()'>Shutdown</button>"+
 "<button onclick='restart()'>Restart</button><br><br>"+
 "<div id='output'></div>";
}

function startCamera(){
 const output=document.getElementById("output");
 navigator.mediaDevices.getUserMedia({video:true})
 .then(stream=>{
   videoStream=stream;
   const video=document.createElement("video");
   video.id="cam";
   video.srcObject=stream;
   video.autoplay=true;
   output.innerHTML="";
   output.appendChild(video);
 })
 .catch(()=>output.innerHTML="Camera Blocked ‚ùå");
}

function stopCamera(){
 if(videoStream){
   videoStream.getTracks().forEach(track=>track.stop());
   document.getElementById("output").innerHTML="Camera Stopped";
 }
}

function snapshot(){
 const video=document.getElementById("cam");
 if(!video) return;
 const snapCanvas=document.createElement("canvas");
 snapCanvas.width=video.videoWidth;
 snapCanvas.height=video.videoHeight;
 snapCanvas.getContext("2d").drawImage(video,0,0);
 const link=document.createElement("a");
 link.download="snapshot.png";
 link.href=snapCanvas.toDataURL();
 link.click();
}

function startMic(){
 navigator.mediaDevices.getUserMedia({audio:true})
 .then(stream=>{
   audioStream=stream;
   document.getElementById("output").innerHTML="Microphone Active üé§";
 })
 .catch(()=>document.getElementById("output").innerHTML="Mic Blocked ‚ùå");
}

function systemInfo(){
 document.getElementById("output").innerHTML=
 "Platform: "+navigator.platform+"<br>"+
 "User Agent: "+navigator.userAgent;
}

function wifiScan(){
 const output=document.getElementById("output");
 output.innerHTML="Scanning WiFi...<br>";
 let networks=["TP-Link_5G","AndroidAP","Home_WiFi","BekbolotNet"];
 networks.forEach((n,i)=>{
   setTimeout(()=>output.innerHTML+="Found: "+n+"<br>",i*500);
 });
}

function terminal(){
 const output=document.getElementById("output");
 output.innerHTML="Terminal Ready<br><input id='cmd'>";
 document.getElementById("cmd").focus();
 document.getElementById("cmd").addEventListener("keydown",function(e){
  if(e.key==="Enter"){
   runCommand(this.value);
  }
 });
}

function runCommand(cmd){
 const output=document.getElementById("output");
 if(cmd==="help"){
   output.innerHTML+="<br>Commands: help, clear, date, ip, exit";
 }
 else if(cmd==="clear"){
   output.innerHTML="";
 }
 else if(cmd==="date"){
   output.innerHTML+="<br>"+new Date();
 }
 else if(cmd==="ip"){
   output.innerHTML+="<br>"+location.hostname;
 }
 else if(cmd==="exit"){
   loadSystem();
 }
 else{
   output.innerHTML+="<br>Unknown Command";
 }
}

function shutdown(){
 document.body.innerHTML="<h1 style='color:#0f0;text-align:center;margin-top:40vh;'>SYSTEM OFF</h1>";
}

function restart(){
 location.reload();
}

passwordScreen();
</script>
</body>
</html>
